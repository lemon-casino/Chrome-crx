<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tab Clean Master · 通用选项</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <main class="options" aria-label="Tab Clean Master 通用选项">
      <header class="options__header">
        <h1>通用选项配置</h1>
        <p>
          配置扩展的默认清理行为与自动化策略。所有设置会自动保存，并与弹窗内的“当前页面”功能保持同步。
        </p>
      </header>
      <form class="options__form" id="options-form" novalidate>
        <section class="options__section" aria-labelledby="section-time">
          <div class="section__heading">
            <h2 id="section-time">默认时间范围</h2>
            <p>选择在执行清理操作时应追溯的时间段。</p>
          </div>
          <fieldset class="options__fieldset" role="radiogroup" aria-labelledby="section-time">
            <legend class="sr-only">时间范围</legend>
            <div class="options__grid options__grid--time">
              <label class="chip">
                <input type="radio" name="timeRange" value="last15Minutes" />
                <span>最近 15 分钟</span>
              </label>
              <label class="chip">
                <input type="radio" name="timeRange" value="lastHour" />
                <span>最近 1 小时</span>
              </label>
              <label class="chip">
                <input type="radio" name="timeRange" value="last24Hours" />
                <span>最近 24 小时</span>
              </label>
              <label class="chip">
                <input type="radio" name="timeRange" value="last7Days" />
                <span>最近 7 天</span>
              </label>
              <label class="chip">
                <input type="radio" name="timeRange" value="last4Weeks" />
                <span>最近 4 周</span>
              </label>
              <label class="chip">
                <input type="radio" name="timeRange" value="forever" />
                <span>全部时间</span>
              </label>
            </div>
          </fieldset>
        </section>
        <section class="options__section" aria-labelledby="section-data">
          <div class="section__heading">
            <h2 id="section-data">默认清理数据类型</h2>
            <p>这些数据类型会在弹窗中默认勾选，可按需启用或禁用。</p>
          </div>
          <div class="options__grid options__grid--types">
            <label class="toggle">
              <input type="checkbox" value="cache" data-type />
              <span>缓存数据</span>
            </label>
            <label class="toggle">
              <input type="checkbox" value="cookies" data-type />
              <span>Cookie</span>
            </label>
            <label class="toggle">
              <input type="checkbox" value="history" data-type />
              <span>历史记录</span>
            </label>
            <label class="toggle">
              <input type="checkbox" value="localStorage" data-type />
              <span>本地存储</span>
            </label>
            <label class="toggle">
              <input type="checkbox" value="downloads" data-type />
              <span>下载记录</span>
            </label>
            <label class="toggle">
              <input type="checkbox" value="passwords" data-type />
              <span>已保存的密码</span>
            </label>
          </div>
        </section>
        <section class="options__section" aria-labelledby="section-automation">
          <div class="section__heading">
            <h2 id="section-automation">自动清理策略</h2>
            <p>在达到指定条件时自动执行默认的清理策略。</p>
          </div>
          <div class="automation">
            <label class="switch">
              <input type="checkbox" data-automation="enabled" />
              <span class="switch__control" aria-hidden="true"></span>
              <span class="switch__label">启用自动清理</span>
            </label>
            <div class="automation__threshold">
              <label for="automation-threshold">标签页数量阈值</label>
              <input
                id="automation-threshold"
                type="number"
                inputmode="numeric"
                min="5"
                max="50"
                step="1"
                data-automation="threshold"
              />
              <p class="automation__hint">
                当打开的标签页数量超过该值时，将提示执行一次默认清理。
              </p>
            </div>
            <fieldset
              class="automation__events"
              role="radiogroup"
              aria-labelledby="automation-events-title"
            >
              <legend class="automation__legend" id="automation-events-title">
                浏览器事件自动清理
              </legend>
              <p class="automation__hint">
                在打开或关闭浏览器时自动执行一次默认清理。默认保持关闭。
              </p>
              <div class="automation__event-options">
                <label class="chip chip--dense">
                  <input type="radio" name="browserEvent" value="off" />
                  <span>关闭</span>
                </label>
                <label class="chip chip--dense">
                  <input type="radio" name="browserEvent" value="startup" />
                  <span>打开浏览器时</span>
                </label>
                <label class="chip chip--dense">
                  <input type="radio" name="browserEvent" value="shutdown" />
                  <span>关闭浏览器前</span>
                </label>
              </div>
            </fieldset>
          </div>
        </section>
        <div class="options__actions">
          <button type="button" class="options__reset" data-reset>恢复默认设置</button>
          <p class="options__status" role="status" aria-live="polite" data-status></p>
        </div>
      </form>
      <footer class="options__footer">
        <small>版本 0.2.0 · 插件开发阶段</small>
      </footer>
    </main>
    <script type="module" src="options.js"></script>
  </body>
</html>
